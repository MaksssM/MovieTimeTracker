# –ü–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö –≤ MovieTimeTracker

**–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É:** 17 –≥—Ä—É–¥–Ω—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** MovieTimeTracker (Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ñ—ñ–ª—å–º—ñ–≤)

---

## –ó–ú–Ü–°–¢

1. [–ê–ª–≥–æ—Ä–∏—Ç–º –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å–ø–∏—Å–∫—É (RecyclerView)](#1-–∞–ª–≥–æ—Ä–∏—Ç–º-–≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó-—Å–ø–∏—Å–∫—É)
2. [–ê–ª–≥–æ—Ä–∏—Ç–º –ª—ñ–Ω—ñ–π–Ω–æ–≥–æ –ø–æ—à—É–∫—É](#2-–∞–ª–≥–æ—Ä–∏—Ç–º-–ª—ñ–Ω—ñ–π–Ω–æ–≥–æ-–ø–æ—à—É–∫—É)
3. [–ê–ª–≥–æ—Ä–∏—Ç–º —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ñ](#3-–∞–ª–≥–æ—Ä–∏—Ç–º-—Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ñ)
4. [–Ü–Ω—à—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏](#4-—ñ–Ω—à—ñ-–∞–ª–≥–æ—Ä–∏—Ç–º–∏)
5. [–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏](#5-–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏-—Ç–∞-–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏)
6. [–ú–∞—Ç—Ä–∏—Ü—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä](#6-–º–∞—Ç—Ä–∏—Ü—è-–∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤-—Ç–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä)
7. [–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤ UI](#7-–ø—Ä–∞–∫—Ç–∏—á–Ω—ñ-–ø—Ä–∏–∫–ª–∞–¥–∏-–≤-ui)

---

## 1. –ê–õ–ì–û–†–ò–¢–ú –í–Ü–†–¢–£–ê–õ–Ü–ó–ê–¶–Ü–á –°–ü–ò–°–ö–£

### 1.1 –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–¢–ê–ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ RecyclerView + ListAdapter**

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è:** Android RecyclerView –∑ –ø–∞–∫–µ—Ç—É `androidx.recyclerview:recyclerview:1.3.2`

### 1.2 –Ø–∫ –ø—Ä–∞—Ü—é—î –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è

RecyclerView —Ä–µ–∞–ª—ñ–∑—É—î –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:

- **ViewHolder –ø–∞—Ç—Ç–µ—Ä–Ω—É** - –ø–µ—Ä–µ–≥–ª—è–¥–∞—á–∏ (ViewHolder) –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—å—Å—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π
- **Lazy binding** - –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—Ä–∏–≤'—è–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–æ –≤–∏–¥–∏–º–∏—Ö –ø–æ–∑–∏—Ü—ñ–π –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
- **DiffUtil.ItemCallback** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—á–∏—Å–ª—é—î —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ —Å–ø–∏—Å–∫–∞–º–∏ —ñ –æ–Ω–æ–≤–ª—é—î —Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏

### 1.3 –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —É –ø—Ä–æ–µ–∫—Ç—ñ

**–§–∞–π–ª:** `SearchAdapter.kt` (—Ä—è–¥–∫–∏ 1-20)

```kotlin
class SearchAdapter : ListAdapter<Any, SearchAdapter.SearchViewHolder>(DiffCallback) {

    var onItemClick: ((Any) -> Unit)? = null
    var onItemLongClick: ((Any) -> Unit)? = null
    var currentQuery: String = ""

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): SearchViewHolder {
        val binding = ItemSearchResultBinding.inflate(LayoutInflater.from(parent.context), parent, false)
        return SearchViewHolder(binding)
    }

    override fun onBindViewHolder(holder: SearchViewHolder, position: Int) {
        val currentItem = getItem(position)
        holder.bind(currentItem)
    }
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏:**

```
–ï–∫—Ä–∞–Ω: –≤–∏–¥–∏–º—ñ 5 –∑ 100 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Film 1 (ViewHolder #1)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
‚îÇ Film 2 (ViewHolder #2)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
‚îÇ Film 3 (ViewHolder #3)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
‚îÇ Film 4 (ViewHolder #4)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
‚îÇ Film 5 (ViewHolder #5)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ... 95 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ ...    ‚îÇ  ‚óÑ‚îÄ‚îÄ –ù–µ –≤ –ø–∞–º'—è—Ç—ñ!
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Film 2 (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –¢–æ–π –∂–µ ViewHolder #1
‚îÇ Film 3 (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤)  ‚îÇ  ‚óÑ‚îÄ‚îÄ –¢–æ–π –∂–µ ViewHolder #2
‚îÇ Film 4 (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤)  ‚îÇ
‚îÇ Film 5 (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤)  ‚îÇ
‚îÇ Film 6 (–Ω–æ–≤–∞ –ø—Ä–∏–≤'—è–∑–∫–∞) ‚îÇ  ‚óÑ‚îÄ‚îÄ –ù–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.4 DiffUtil –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

**–§–∞–π–ª:** `SearchAdapter.kt` (—Ä—è–¥–∫–∏ 189-210)

```kotlin
companion object {
    private val DiffCallback = object : DiffUtil.ItemCallback<Any>() {
        override fun areItemsTheSame(oldItem: Any, newItem: Any): Boolean {
            return when {
                oldItem is MovieResult && newItem is MovieResult -> {
                    oldItem.id == newItem.id
                }
                oldItem is TvShowResult && newItem is TvShowResult -> {
                    oldItem.id == newItem.id
                }
                else -> false
            }
        }

        override fun areContentsTheSame(oldItem: Any, newItem: Any): Boolean {
            return when {
                oldItem is MovieResult && newItem is MovieResult -> {
                    oldItem.id == newItem.id &&
                            oldItem.title == newItem.title &&
                            oldItem.posterPath == newItem.posterPath &&
                            oldItem.voteAverage == newItem.voteAverage
                // ...–±—ñ–ª—å—à–µ –ø–æ–ª—ñ–≤
            }
        }
    }
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:** Myers' diff algorithm  
**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n + m)  
**–ú–µ—Ç–∞:** –û–±—á–∏—Å–ª–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É

### 1.5 –î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ UI

**–ú—ñ—Å—Ü—è:**
1. `SearchActivity.kt` - RecyclerView –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É
2. `WatchedFragment.kt` - —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏—Ö —Ñ—ñ–ª—å–º—ñ–≤
3. `PlannedFragment.kt` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∏—Ö –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É
4. `TrendingFragment.kt` - —Ç—Ä–µ–Ω–¥–æ–≤—ñ —Ñ—ñ–ª—å–º–∏
5. `UpcomingFragment.kt` - –Ω–∞–π–±–ª–∏–∂—á—ñ —Ä–µ–ª—ñ–∑–∏

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–æ–∫:** –¥–æ 500+ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Å–ø–∏—Å–∫—É

---

## 2. –ê–õ–ì–û–†–ò–¢–ú –õ–Ü–ù–Ü–ô–ù–û–ì–û –ü–û–®–£–ö–£

### 2.1 –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–¢–ê–ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ 6 –æ—Å–Ω–æ–≤–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö**

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n), –¥–µ n - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

### 2.2 –ú—ñ—Å—Ü–µ 1: –ü–æ—à—É–∫ —Å–∏–º–≤–æ–ª—É –≤ —Ç–µ–∫—Å—Ç—ñ (indexOf)

**–§–∞–π–ª:** `SearchAdapter.kt` (—Ä—è–¥–∫–∏ 165-183)

```kotlin
private fun highlightText(textView: android.widget.TextView, original: String) {
    if (currentQuery.isBlank() || original.isBlank()) {
        textView.text = original
        return
    }
    // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - indexOf() —Å–∫–∞–Ω—É—î—è—è—è–∫ –≤–µ—Å—å —Ä—è–¥–æ–∫ –∑–ª—ñ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ
    val idx = original.lowercase().indexOf(currentQuery.lowercase())
    if (idx == -1) {
        textView.text = original
        return
    }
    // –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
    val span = android.text.SpannableString(original)
    span.setSpan(
        android.text.style.ForegroundColorSpan(textView.context.getColor(R.color.accent)),
        idx,
        idx + currentQuery.length,
        android.text.Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
    )
    span.setSpan(
        android.text.style.StyleSpan(android.graphics.Typeface.BOLD),
        idx,
        idx + currentQuery.length,
        android.text.Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
    )
    textView.text = span
}
```

**–í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:** SearchAdapter.kt (—Ä—è–¥–∫–∏ 103-104)

**–©–æ —Ä–æ–±–∏—Ç—å:** –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–µ—Ä—à—É –ø–æ–∑–∏—Ü—ñ—é –ø–æ—à—É–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É –≤ —Ç–∏—Ç—É–ª—ñ —Ç–∞ –æ–ø–∏—Å—ñ —Ñ—ñ–ª—å–º—É, –ø–æ—Ç—ñ–º –≤–∏–¥—ñ–ª—è—î –π–æ–≥–æ –∫–æ–ª—å–æ—Ä–æ–º.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–ó–∞–ø–∏—Ç: "spider"
–¢–µ–∫—Å—Ç: "Spider-Man: No Way Home"
            ^^^^^^
indexOf() –∑–Ω–∞–π—à–ª–æ –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó 0
```

---

### 2.3 –ú—ñ—Å—Ü–µ 2: –§—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –∑–∞ —Ç–∏–ø–æ–º (filterIsInstance)

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 153-162)

```kotlin
private fun applyFiltersAndSort() {
    var filtered = lastSearchResults.toMutableList()

    // Apply type filter
    when (_filterType.value) {
        FilterType.MOVIES -> {
            // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - filterIsInstance —Å–∫–∞–Ω—É—î –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
            filtered = filtered.filterIsInstance<MovieResult>().toMutableList()
        }
        FilterType.TV_SHOWS -> {
            filtered = filtered.filterIsInstance<TvShowResult>().toMutableList()
        }
        else -> {} // ALL - no filter
    }
```

**–©–æ —Ä–æ–±–∏—Ç—å:** –ü—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –≤—Å—ñ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ—à—É–∫—É —Ç–∞ –≤–∏–±–∏—Ä–∞—î —Ç—ñ–ª—å–∫–∏ —Ñ—ñ–ª—å–º–∏ –∞–±–æ —Ç—ñ–ª—å–∫–∏ —Å–µ—Ä—ñ–∞–ª–∏.

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n), –¥–µ n - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

---

### 2.4 –ú—ñ—Å—Ü–µ 3: –§—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º (filter)

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 165-173)

```kotlin
// Apply rating filter
val minR = _minRating.value ?: 0.0
if (minR > 0.0) {
    // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - filter —Å–∫–∞–Ω—É—î –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
    filtered = filtered.filter { any ->
        when (any) {
            is MovieResult -> (any.voteAverage?.toDouble() ?: 0.0) >= minR
            is TvShowResult -> (any.voteAverage?.toDouble() ?: 0.0) >= minR
            else -> false
        }
    }.toMutableList()
}
```

**–©–æ —Ä–æ–±–∏—Ç—å:** –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ —Ñ—ñ–ª—å–º–∏/—Å–µ—Ä—ñ–∞–ª–∏ –∑ —Ä–µ–π—Ç–∏–Ω–≥–æ–º –Ω–µ –º–µ–Ω—à–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ–≥–æ –º—ñ–Ω—ñ–º—É–º—É.

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n)

---

### 2.5 –ú—ñ—Å—Ü–µ 4: –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∑ —ñ—Å—Ç–æ—Ä—ñ—ó (removeAll)

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 201-218)

```kotlin
private fun addToSearchHistory(query: String) {
    if (query.isBlank()) return

    val history = _searchHistory.value?.toMutableList() ?: mutableListOf()

    // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - removeAll —Å–∫–∞–Ω—É—î —Å–ø–∏—Å–æ–∫ —Ç–∞ –≤–∏–¥–∞–ª—è—î –µ–ª–µ–º–µ–Ω—Ç–∏
    history.removeAll { it.equals(query, ignoreCase = true) }

    history.add(0, query)
    
    if (history.size > 10) {
        history.removeAt(history.size - 1)
    }

    _searchHistory.value = history
}
```

**–©–æ —Ä–æ–±–∏—Ç—å:** –ó–∞–ø–æ–±—ñ–≥–∞—î –¥—É–±–ª—é–≤–∞–Ω–Ω—é –æ–¥–Ω–æ–≥–æ –π —Ç–æ–≥–æ –∂ –ø–æ—à—É–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É –≤ —ñ—Å—Ç–æ—Ä—ñ—ó.

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n)

---

### 2.6 –ú—ñ—Å—Ü–µ 5: –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 348-361)

```kotlin
private fun removeDuplicates(items: List<Any>): List<Any> {
    val seen = mutableSetOf<String>()
    // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - filter —Å–∫–∞–Ω—É—î –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
    return items.filter { item ->
        val key = when (item) {
            is MovieResult -> "movie_${item.id}"
            is TvShowResult -> "tv_${item.id}"
            else -> return@filter true
        }
        // –ü–µ—Ä–µ–≤—ñ—Ä—è —á–∏ –≤–∂–µ –±–∞—á–∏–ª–∏ —Ü–µ–π –µ–ª–µ–º–µ–Ω—Ç
        seen.add(key)
    }
}
```

**–î–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:** `SearchViewModel.kt` (—Ä—è–¥–æ–∫ 109)

**–©–æ —Ä–æ–±–∏—Ç—å:** –í–∏–¥–∞–ª—è—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, —è–∫—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –∑ TMDB API (–∫–æ–ª–∏ –æ–¥–∏–Ω —Ñ—ñ–ª—å–º –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞–ø–∏—Ç—É –≤ –∫—ñ–ª—å–∫–æ—Ö –º–æ–≤–∞—Ö).

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n)

---

### 2.7 –ú—ñ—Å—Ü–µ 6: –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤/—Å–µ—Ä—ñ–∞–ª—ñ–≤

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 284-292)

```kotlin
@Suppress("unused")
fun getMoviesCount(): Int {
    // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - filterIsInstance —Å–∫–∞–Ω—É—î –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
    return lastSearchResults.filterIsInstance<MovieResult>().size
}

@Suppress("unused")
fun getTvShowsCount(): Int {
    return lastSearchResults.filterIsInstance<TvShowResult>().size
}
```

**–©–æ —Ä–æ–±–∏—Ç—å:** –†–∞—Ö—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ—ñ–ª—å–º—ñ–≤ —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–≤ —É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.

---

## 3. –ê–õ–ì–û–†–ò–¢–ú –•–ï–®-–¢–ê–ë–õ–ò–¶–Ü

### 3.1 –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–¢–ê–ö, –∞–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ 4 –æ—Å–Ω–æ–≤–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö**

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(1) —Å–µ—Ä–µ–¥–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—è

**–¢–∏–ø–∏:** HashMap, LinkedHashMap, Map

### 3.2 –ú—ñ—Å—Ü–µ 1: –ö–µ—à–∏—Ä—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ—à—É–∫—É (HashMap)

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 62-65, 85-113)

```kotlin
// –•–ï–®–ò–†–£–í–ê–ù–ù–Ø - HashMap –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–µ—à—É
private val searchCache = mutableMapOf<String, List<Any>>()

fun searchMulti(query: String) {
    if (query.isBlank()) {
        _searchResult.value = emptyList()
        return
    }

    lastSearchQuery = query
    addToSearchHistory(query)

    // –ü–û–®–£–ö –í –•–ï–®-–¢–ê–ë–õ–ò–¶–Ü - O(1) –æ–ø–µ—Ä–∞—Ü—ñ—è
    searchCache[query]?.let {
        lastSearchResults = it
        Log.d("SearchViewModel", "Using cached results for: $query (cache size: ${searchCache.size})")
        applyFiltersAndSort()
        return
    }

    // –Ø–∫—â–æ –∫–µ—à –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ä–æ–±–∏–º–æ API –∑–∞–ø–∏—Ç...
    viewModelScope.launch {
        try {
            _isLoading.value = true
            var results = repository.searchMultiLanguage(query)

            // –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è
            results = removeDuplicates(results)

            lastSearchResults = results
            // –í–°–¢–ê–í–ö–ê –í –•–ï–®-–¢–ê–ë–õ–ò–¶–Ø - O(1)
            searchCache[query] = results
            applyFiltersAndSort()
            _errorMessage.value = null
        } catch (e: Exception) {
            Log.e("SearchViewModel", "Error searching content", e)
            _searchResult.value = emptyList()
            _errorMessage.value = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ: ${e.localizedMessage ?: e.message}"
        } finally {
            _isLoading.value = false
        }
    }
}
```

**–î–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:** SearchActivity.kt - –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏ –ø–æ—à—É–∫—É

**–©–æ —Ä–æ–±–∏—Ç—å:** –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ —Ä–æ–±–∏–≤ —Ü–µ–π –ø–æ—à—É–∫ —Ä–∞–Ω—ñ—à–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –±–µ—Ä—É—Ç—å—Å—è –∑ –ø–∞–º'—è—Ç—ñ –±–µ–∑ –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —à—É–∫–∞—î "Spider-Man"
 ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ TMDB (10-20 –º—Å)
 ‚Üí –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ searchCache["Spider-Man"]

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–Ω–æ–≤—É —à—É–∫–∞—î "Spider-Man"
 ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –±–µ—Ä—É—Ç—å—Å—è –∑ searchCache (0.1 –º—Å) ‚úì –ù–∞–±–∞–≥–∞—Ç–æ —à–≤–∏–¥—à–µ!

searchCache = {
    "Spider-Man" ‚Üí [50 —Ñ—ñ–ª—å–º—ñ–≤],
    "Avatar" ‚Üí [30 —Ñ—ñ–ª—å–º—ñ–≤],
    "The Matrix" ‚Üí [20 —Ñ—ñ–ª—å–º—ñ–≤],
    ...
}
```

**–î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**

```kotlin
@Suppress("unused")
fun clearSearchCache() {
    searchCache.clear()
}

@Suppress("unused")
fun getCacheSize(): Int {
    return searchCache.size
}
```

---

### 3.3 –ú—ñ—Å—Ü–µ 2: –î–µ–¥—É–±–ª—ñ–∫–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (LinkedHashMap)

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 119-129)

```kotlin
// –•–ï–®–ò–†–£–í–ê–ù–ù–Ø - LinkedHashMap –¥–ª—è –¥–µ–¥—É–±–ª—ñ–∫–∞—Ü—ñ—ó
val allItems = (movieItems + tvItems)
val uniqueMap = linkedMapOf<Pair<Int, String>, MutableList<Any>>()

allItems.forEach { item ->
    val key = when (item) {
        is MovieResult -> item.id to "movie"
        is TvShowResult -> item.id to "tv"
        else -> 0 to ""
    }
    // –ü–û–®–£–ö –í –•–ï–®-–¢–ê–ë–õ–ò–¶–Ü - O(1)
    // getOrPut –¥–æ–¥–∞—î –Ω–æ–≤–∏–π –∫–ª—é—á –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞—î —ñ—Å–Ω—É—é—á–∏–π
    uniqueMap.getOrPut(key) { mutableListOf() }.add(item)
}

// –ù–∞—Å–ª—ñ–¥–æ–∫: –¥—É–±–ª—ñ–∫–∞—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ, –∫–æ–∂–µ–Ω —Ñ—ñ–ª—å–º –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑
```

**–î–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:** `AppRepository.kt` - —Ñ—É–Ω–∫—Ü—ñ—è `searchMultiLanguage()`

**–©–æ —Ä–æ–±–∏—Ç—å:**
- TMDB –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –º–æ–≤
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, "Titanic" –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–ª—è uk-UA, ru-RU, en-US
- LinkedHashMap –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ Titanic –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑
- `getOrPut()` –≤–∏–∫–æ–Ω—É—î –ø–æ—à—É–∫ –∑–∞ –∫–ª—é—á–µ–º –∑–∞ O(1) —á–∞—Å—É

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:**
```
LinkedHashMap:
  (1892, "movie") ‚Üí [Titanic, Titanic, Titanic]  (–∑ 3 –º–æ–≤)
  (550, "movie") ‚Üí [Fight Club]                  (–∑—ñ 2 –º–æ–≤)
  (278, "movie") ‚Üí [The Shawshank Redemption]    (–∑ 1 –º–æ–≤–∏)
  (550, "tv") ‚Üí [Breaking Bad]                   (—Å–µ—Ä—ñ–∞–ª –∑ 2 –º–æ–≤)
```

**–ß–æ–º—É LinkedHashMap, –∞ –Ω–µ HashMap?**
- LinkedHashMap –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –≤ —Ç–æ–º—É –ø–æ—Ä—è–¥–∫—É, –≤ —è–∫–æ–º—É –≤–æ–Ω–∏ –±—É–ª–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑ API

---

### 3.4 –ú—ñ—Å—Ü–µ 3: –¢—Ä–∞–Ω—Å–ª—ñ–±–µ—Ä–∞—Ü—ñ—è –∫–∏—Ä–∏–ª–∏—Ü—ñ (Map)

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 47-54)

```kotlin
// –•–ï–®–ò–†–£–í–ê–ù–ù–Ø - Map –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Ç—Ä–∞–Ω—Å–ª—ñ–±–µ—Ä–∞—Ü—ñ—ó
fun transliterateCyrToLat(input: String): String {
    val map = mapOf(
        '\u0430' to "a",     // –∞ ‚Üí a
        '\u0431' to "b",     // –± ‚Üí b
        '\u0432' to "v",     // –≤ ‚Üí v
        '\u0433' to "h",     // –≥ ‚Üí h
        '\u0491' to "g",     // “ë ‚Üí g
        '\u0434' to "d",     // –¥ ‚Üí d
        '\u0435' to "e",     // –µ ‚Üí e
        '\u0436' to "zh",    // –∂ ‚Üí zh
        '\u0437' to "z",     // –∑ ‚Üí z
        '\u0438' to "y",     // –∏ ‚Üí y
        '\u0456' to "i",     // —ñ ‚Üí i
        '\u0457' to "i",     // —ó ‚Üí i
        '\u0439' to "i",     // –π ‚Üí i
        '\u043a' to "k",     // –∫ ‚Üí k
        '\u043b' to "l",     // –ª ‚Üí l
        '\u043c' to "m",     // –º ‚Üí m
        '\u043d' to "n",     // –Ω ‚Üí n
        '\u043e' to "o",     // –æ ‚Üí o
        '\u043f' to "p",     // –ø ‚Üí p
        '\u0440' to "r",     // —Ä ‚Üí r
        '\u0441' to "s",     // —Å ‚Üí s
        '\u0442' to "t",     // —Ç ‚Üí t
        '\u0443' to "u",     // —É ‚Üí u
        '\u0444' to "f",     // —Ñ ‚Üí f
        '\u0445' to "kh",    // —Ö ‚Üí kh
        '\u0446' to "ts",    // —Ü ‚Üí ts
        '\u0447' to "ch",    // —á ‚Üí ch
        '\u0448' to "sh",    // —à ‚Üí sh
        '\u0449' to "shch",  // —â ‚Üí shch
        '\u044c' to "",      // —å ‚Üí ""
        '\u044e' to "yu",    // —é ‚Üí yu
        '\u044f' to "ya"     // —è ‚Üí ya
    )
    
    val sb = StringBuilder()
    for (ch in input.lowercase()) {
        // –ü–û–®–£–ö –í –•–ï–®-–¢–ê–ë–õ–ò–¶–Ü - O(1)
        val repl = map[ch]
        if (repl != null) sb.append(repl) else sb.append(ch)
    }
    return sb.toString()
}
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å "–ü–∞—É–∫-–ª—é–¥–∏–Ω–∞" (–∫–∏—Ä–∏–ª–∏—Ü—è)
- –§—É–Ω–∫—Ü—ñ—è –∫–æ–Ω–≤–µ—Ä—Ç—É—î –≤ "Pauk-lyudyna" (–ª–∞—Ç–∏–Ω–∏—Ü—è) –∑–∞ O(n) —á–∞—Å—É
- –ö–æ–∂–µ–Ω —Å–∏–º–≤–æ–ª —à—É–∫–∞—î—Ç—å—Å—è –≤ Map –∑–∞ **O(1)** –æ–ø–µ—Ä–∞—Ü—ñ—é

**–ü—Ä–∏–∫–ª–∞–¥:**
```
Input:  "–ü–∞—É–∫-–ª—é–¥–∏–Ω–∞"
Output: "Pauk-lyudyna"

–ö–æ–∂–µ–Ω —Å–∏–º–≤–æ–ª (–ü, –∞, —É, –∫, ...) —à—É–∫–∞—î—Ç—å—Å—è –≤ map –∑–∞ O(1) –æ–ø–µ—Ä–∞—Ü—ñ—é
```

**–î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:** AppRepository.kt (—Ä—è–¥–æ–∫ 70)

```kotlin
val qTrans = transliterateCyrToLat(query)
```

---

### 3.5 –ú—ñ—Å—Ü–µ 4: –ö–µ—à —É–ª—é–±–ª–µ–Ω–∏—Ö –ø–æ—à—É–∫—ñ–≤ (contains)

**–§–∞–π–ª:** `SearchViewModel.kt` (—Ä—è–¥–∫–∏ 285-297)

```kotlin
private val _favoriteSearches = MutableLiveData<List<String>>(emptyList())

@Suppress("unused")
fun toggleFavoriteSearch(query: String) {
    val favorites = _favoriteSearches.value?.toMutableList() ?: mutableListOf()

    if (favorites.contains(query)) {  // –õ–Ü–ù–Ü–ô–ù–ò–ô –ü–û–®–£–ö - O(n)
        favorites.remove(query)
    } else {
        favorites.add(0, query)
    }

    _favoriteSearches.value = favorites
}

@Suppress("unused")
fun isFavorite(query: String): Boolean {
    return _favoriteSearches.value?.contains(query) ?: false  // O(n) –¥–ª—è List
}
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¶–µ –º—ñ—Å—Ü–µ –º–æ–≥–ª–æ –± –±—É—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –∑ HashSet –∑–∞–º—ñ—Å—Ç—å List –¥–ª—è O(1) –ø–æ—à—É–∫—É.

---

## 4. –Ü–ù–®–Ü –ê–õ–ì–û–†–ò–¢–ú–ò

### 4.1 –ê–ª–≥–æ—Ä–∏—Ç–º Levenshtein (–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å)

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 135-150)

```kotlin
// Levenshtein distance for lightweight fuzzy scoring
fun levenshtein(a: String, b: String): Int {
    if (a == b) return 0
    // –î–∏–Ω–∞–º—ñ—á–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è - O(m*n) –º–∞—Ç—Ä–∏—Ü—è
    val dp = Array(a.length + 1) { IntArray(b.length + 1) }
    for (i in 0..a.length) dp[i][0] = i
    for (j in 0..b.length) dp[0][j] = j
    
    for (i in 1..a.length) {
        for (j in 1..b.length) {
            val cost = if (a[i - 1] == b[j - 1]) 0 else 1
            dp[i][j] = minOf(
                dp[i - 1][j] + 1,      // –≤–∏–¥–∞–ª–µ–Ω–Ω—è
                dp[i][j - 1] + 1,      // –≤—Å—Ç–∞–≤–∫–∞
                dp[i - 1][j - 1] + cost // –∑–∞–º—ñ–Ω–∞
            )
        }
    }
    return dp[a.length][b.length]
}
```

**–î–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 160-161)

```kotlin
val dist = levenshtein(t, qNorm).coerceAtMost(levenshtein(t, qTrans))
if (dist <= 3) score += (4 - dist) * 15  // –ù–µ–≤–µ–ª–∏–∫–∞ —Ä–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å = –±—ñ–ª—å—à —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ü–æ—Ä—ñ–≤–Ω—é—î –¥–≤–∞ —Ä—è–¥–∫–∏ —Ç–∞ —Ä–∞—Ö—É—î –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω (–≤–∏–¥–∞–ª–µ–Ω–Ω—è, –≤—Å—Ç–∞–≤–∫–∏, –∑–∞–º—ñ–Ω)
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ "Spiderman" –∑–∞–º—ñ—Å—Ç—å "Spider-Man", Levenshtein –∑–Ω–∞–π–¥–µ –±–ª–∏–∑—å–∫—ñ—Å—Ç—å

**–ü—Ä–∏–∫–ª–∞–¥:**
```
"Spider-Man" ‚Üí "Spiderman"
–†–µ–¥–∞–∫—Ü—ñ–π–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å = 1 (–æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–µ—Ñ—ñ—Å—É)
score += (4 - 1) * 15 = +45 –æ—á–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—ñ
```

**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(m√ón), –¥–µ m —Ç–∞ n - –¥–æ–≤–∂–∏–Ω–∏ —Ä—è–¥–∫—ñ–≤

---

### 4.2 –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –¥–µ—Ç–µ–∫—Ü—ñ—ó –º–æ–≤–∏

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 39-45)

```kotlin
// Normalization: lowercase, remove punctuation and diacritics
fun normalize(text: String?): String = text?.let {
    val lowered = it.lowercase()
    // remove diacritics
    val normalized = java.text.Normalizer.normalize(lowered, java.text.Normalizer.Form.NFD)
        .replace(Regex("\\p{InCombiningDiacriticalMarks}+"), "")
    normalized.replace(Regex("[^\\p{L}0-9\\s]"), "").trim()
} ?: ""
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:** Unicode Normalization (NFC ‚Üí NFD)

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ö–æ–Ω–≤–µ—Ä—Ç—É—î " Caf√©" ‚Üí "cafe"
- –í–∏–¥–∞–ª—è—î –¥—ñ–∞–∫—Ä–∏—Ç–∏—á–Ω—ñ –∑–Ω–∞–∫–∏
- –í–∏–¥–∞–ª—è—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å–∏–º–≤–æ–ª–∏

---

### 4.3 –î–µ—Ç–µ–∫—Ü—ñ—è –º–æ–≤–∏ –∑–∞–ø–∏—Ç—É

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 35-37)

```kotlin
// detect script (simple heuristic): if contains Cyrillic -> prefer Ukrainian/Russian first
val isCyrillic = query.any { ch -> ch in '\u0400'..'\u04FF' }
val languages = if (isCyrillic) listOf("uk-UA", "ru-RU", "en-US") else listOf("en-US", "uk-UA", "ru-RU")
```

**–©–æ —Ä–æ–±–∏—Ç—å:**
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –º—ñ—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Ç –∫–∏—Ä–∏–ª—ñ—á–Ω—ñ —Å–∏–º–≤–æ–ª–∏
- –Ø–∫—â–æ —Ç–∞–∫, —Å–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞—î –≤ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π —Ç–∞ —Ä–æ—Å—ñ–π—Å—å–∫—ñ–π –º–æ–≤–∞—Ö
- –Ø–∫—â–æ –Ω—ñ, —Å–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞—î –≤ –∞–Ω–≥–ª—ñ–π—Å—å–∫—ñ–π –º–æ–≤—ñ

**–ü—Ä–∏–∫–ª–∞–¥:**
```
"–ø–∞—É–∫" (–∫–∏—Ä–∏–ª–∏—Ü—è) ‚Üí [uk-UA, ru-RU, en-US]
"spider" (–ª–∞—Ç–∏–Ω–∏—Ü—è) ‚Üí [en-US, uk-UA, ru-RU]
```

---

### 4.4 –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–±—ñ—Ä —Ç–æ–ø-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–§–∞–π–ª:** `AppRepository.kt` (—Ä—è–¥–∫–∏ 176-181)

```kotlin
// Sort by score desc, then by vote (appears in multiple languages), then by id
val sorted = scored.sortedWith(compareByDescending<Scored> { it.score }
    .thenByDescending { it.vote })

// Return top 100 items as List<Any>
val result = sorted.map { it.item }.take(100)
```

**–ê–ª–≥–æ—Ä–∏—Ç–º:** Quicksort (–∞–±–æ Timsort –≤ Kotlin)  
**–ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** O(n log n)

**–©–æ —Ä–æ–±–∏—Ç—å:**
1. –°–æ—Ä—Ç—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—é (score)
2. –ü—Ä–∏ —Ä—ñ–≤–Ω–æ–º—É score - —Å–æ—Ä—Ç—É—î –∑–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –º–æ–≤ (vote)
3. –ü–æ–≤–µ—Ä—Ç–∞—î —Ç–æ–ø-100 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

---

## 5. –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–ù–Ü –§–†–ï–ô–ú–í–û–†–ö–ò –¢–ê –ë–Ü–ë–õ–Ü–û–¢–ï–ö–ò

### 5.1 –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Android Framework** | SDK 34 | –ë–∞–∑–æ–≤–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ |
| **AndroidX** | –°—É—á–∞—Å–Ω–∞ | –°—É—á–∞—Å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ |
| **MVVM** | - | –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω (Model-View-ViewModel) |
| **Kotlin** | 2.0.21 | –ú–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è |

### 5.2 UI/View-—à–∞—Ä

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **RecyclerView** | 1.3.2 | –í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—ñ–≤ |
| **CardView** | 1.0.0 | –ö–∞—Ä—Ç–æ—á–∫–∏ UI |
| **ConstraintLayout** | 2.1.4 | –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ |
| **Material Design 3** | 1.11.0 | –ú–∞—Ç–µ—Ä—ñ–∞–ª—å–Ω–∏–π –¥–∏–∑–∞–π–Ω |
| **Lottie** | 6.2.0 | –ê–Ω—ñ–º–∞—Ü—ñ—ó (Airbnb) |
| **Facebook Shimmer** | 0.5.0 | Shimmer –µ—Ñ–µ–∫—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è |
| **SwipeRefreshLayout** | 1.1.0 | Pull-to-refresh |
| **DynamicAnimation** | 1.0.0 | –§—ñ–∑–∏—á–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è |

### 5.3 –ú–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏ —Ç–∞ –¥–∞–Ω—ñ

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Retrofit 2** | 2.9.0 | HTTP –∫–ª—ñ—î–Ω—Ç –¥–ª—è REST API |
| **OkHttp 3** | 4.12.0 | HTTP —Å–æ–∫–µ—Ç –∫–ª—ñ—î–Ω—Ç + –ª–æ–≥—É–≤–∞–Ω–Ω—è |
| **Gson** | 2.9.0 | JSON —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è |
| **Coil** | 2.5.0 | –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å |
| **Coil Compose** | 2.5.0 | –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Jetpack Compose |

### 5.4 –†–æ–±–æ—Ç–∞ –∑ –¥–∞–Ω–∏–º–∏

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Room** | 2.6.1 | ORM –¥–ª—è SQLite –ë–î |
| **SharedPreferences** | 2.1.1 | –õ–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å |
| **Kotlin Coroutines** | 1.7.3 | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è |

### 5.5 Dependency Injection

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Hilt/Dagger 2** | 2.48.1 | –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ |
| **KSP** | - | Kotlin Symbol Processing (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–¥—É) |

### 5.6 –ù–∞–≤—ñ–≥–∞—Ü—ñ—è —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Navigation** | 2.7.6 | –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ |
| **LiveData** | 2.7.0 | –°–ø–æ—Å—Ç–µ—Ä–µ–∂—É–≤–∞–Ω–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–∏—Ö |
| **ViewModel** | 2.7.0 | –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –ø—Ä–∏ —Ä–æ—Ç–∞—Ü—ñ—ó |
| **Lifecycle** | 2.7.0 | –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º |
| **Fragment KTX** | 1.6.2 | –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ |
| **Activity KTX** | 1.8.2 | –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π |

### 5.7 –ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Paging** | 3.2.1 | –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö |

### 5.8 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **JUnit 4** | 4.13.2 | Unit-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è |
| **AndroidX Test** | - | –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è |
| **Espresso** | 3.5.1 | UI —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è |

### 5.9 Build-—Å–∏—Å—Ç–µ–º–∞

| –ù–∞–∑–≤–∞ | –í–µ—Ä—Å—ñ—è | –ú–µ—Ç–∞ |
|-------|--------|------|
| **Android Gradle Plugin** | 8.9.2 | –ü–æ–±—É–¥–æ–≤–∞ Android –¥–æ–¥–∞—Ç–∫—ñ–≤ |
| **Gradle** | wrapper | –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å—ñ—ó –±—É–¥—ñ–≤–µ–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ |

---

## 6. –ú–ê–¢–†–ò–¶–Ø –ê–õ–ì–û–†–ò–¢–ú–Ü–í –¢–ê –°–¢–†–£–ö–¢–£–†

### 6.1 –û—Å–Ω–æ–≤–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è

| –ê–ª–≥–æ—Ä–∏—Ç–º/–°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –ß–∞—Å–æ–≤–∞ –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å | –ú—ñ—Å—Ü–µ –≤ –ö–æ–¥—ñ | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ú—ñ—Å—Ü—å | –ö—ñ–ª—å–∫. –ï–ª–µ–º–µ–Ω—Ç—ñ–≤ |
|-------------------|------------------|--------------|-----------------|-----------------|
| **Linear Search** | O(n) | indexOf, filter, removeAll | 6 | –¥–æ 500 |
| **Hash Table** | O(1) avg | HashMap, LinkedHashMap, Map | 4 | –¥–æ 50+ –∑–∞–ø–∏—Ç—ñ–≤ |
| **DiffUtil** | O(n+m) | RecyclerView.submitList | 5+ | –¥–æ 500 |
| **Levenshtein** | O(m√ón) | AppRepository | 1 | –¥–æ 100 |
| **Sorting** | O(n log n) | sortByDescending | 2 | –¥–æ 100 |
| **Normalization** | O(n) | normalize() | 1 | –¥–æ 50 |

### 6.2 –ü–æ–≤–Ω–æ—Ç–∞ –ø–æ–∫—Ä–∏—Ç—Ç—è –≤ UI

| –ï–∫—Ä–∞–Ω | Linear Search | Hash Table | DiffUtil | Levenshtein |
|------|--------------|-----------|----------|------------|
| SearchActivity | ‚úì | ‚úì | ‚úì | ‚úì |
| WatchedFragment | ‚úó | ‚úó | ‚úì | ‚úó |
| PlannedFragment | ‚úó | ‚úó | ‚úì | ‚úó |
| TrendingFragment | ‚úó | ‚úó | ‚úì | ‚úó |
| UpcomingFragment | ‚úó | ‚úó | ‚úì | ‚úó |

---

## 7. –ü–†–ê–ö–¢–ò–ß–ù–Ü –ü–†–ò–ö–õ–ê–î–ò –í UI

### 7.1 –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø–æ—à—É–∫—É

```
–ö–û–†–ò–°–¢–£–í–ê–ß –í–í–û–î–ò–¢–¨: "–ø–∞—É–∫"
        ‚îÇ
        ‚ñº
1. SearchActivity.kt
   ‚îú‚îÄ –í–≤–µ–¥–µ–Ω–Ω—è: "–ø–∞—É–∫"
   ‚îî‚îÄ –ù–∞—Ç–∏—Å–∫ –∫–Ω–æ–ø–∫–∏: viewModel.searchMulti("–ø–∞—É–∫")

        ‚îÇ
        ‚ñº
2. SearchViewModel.searchMulti("–ø–∞—É–∫")
   ‚îú‚îÄ –ü–µ—Ä–µ–≤—ñ—Ä–∞ –∫–µ—à–∞: searchCache["–ø–∞—É–∫"]?  ‚ùå –ù–µ–º–∞
   ‚îú‚îÄ –î–æ–¥–∞—Ç–∏ –≤ —ñ—Å—Ç–æ—Ä—ñ—é: history.removeAll { ... }  (–ª—ñ–Ω—ñ–π–Ω–∏–π –ø–æ—à—É–∫)
   ‚îî‚îÄ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ repository.searchMultiLanguage("–ø–∞—É–∫")

        ‚îÇ
        ‚ñº
3. AppRepository.searchMultiLanguage("–ø–∞—É–∫")
   ‚îú‚îÄ –î–µ—Ç–µ–∫—Ü—ñ—è –º–æ–≤–∏: —á–∏ –º—ñ—Å—Ç–∏—Ç—å –∫–∏—Ä–∏–ª–∏—Ü—é?  ‚úì –¢–∞–∫
   ‚îú‚îÄ –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è: "–ø–∞—É–∫" ‚Üí "pauk"  (remove diacritics)
   ‚îú‚îÄ –¢—Ä–∞–Ω—Å–ª—ñ–±–µ—Ä–∞—Ü—ñ—è: "–ø–∞—É–∫" ‚Üí "pauk"  (Map O(1) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª—É)
   ‚îú‚îÄ –ó–∞–ø–∏—Ç–∏ –¥–æ TMDB API:
   ‚îÇ  ‚îú‚îÄ searchMovies("–ø–∞—É–∫", uk-UA)
   ‚îÇ  ‚îú‚îÄ searchMovies("pauk", uk-UA)
   ‚îÇ  ‚îú‚îÄ searchMovies("–ø–∞—É–∫", en-US)
   ‚îÇ  ‚îî‚îÄ ... 6 –∑–∞–ø–∏—Ç—ñ–≤ –≤—Å—å–æ–≥–æ
   ‚îú‚îÄ –î–µ–¥—É–±–ª—ñ–∫–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:
   ‚îÇ  ‚îú‚îÄ LinkedHashMap<(id, type)>
   ‚îÇ  ‚îî‚îÄ uniqueMap.getOrPut(key) {...}  ‚óÑ‚îÄ‚îÄ O(1)
   ‚îú‚îÄ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—ñ:
   ‚îÇ  ‚îú‚îÄ –¢–æ—á–Ω–µ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è: +200 –æ—á–æ–∫
   ‚îÇ  ‚îú‚îÄ startsWith: +120 –æ—á–æ–∫
   ‚îÇ  ‚îú‚îÄ contains: +60 –æ—á–æ–∫
   ‚îÇ  ‚îî‚îÄ Levenshtein (dist ‚â§ 3): +(4-dist)*15 –æ—á–æ–∫
   ‚îú‚îÄ –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—é: O(n log n)
   ‚îî‚îÄ –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ top 100 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

        ‚îÇ
        ‚ñº
4. SearchViewModel.searchMulti() –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è
   ‚îú‚îÄ –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏: removeDuplicates()  (–ª—ñ–Ω—ñ–π–Ω–∏–π filter)
   ‚îú‚îÄ –ó–±–µ—Ä–µ–≥—Ç–∏ –≤ –∫–µ—à: searchCache["–ø–∞—É–∫"] = results  ‚óÑ‚îÄ‚îÄ O(1)
   ‚îî‚îÄ applyFiltersAndSort()
      ‚îú‚îÄ filter() –∑–∞ —Ç–∏–ø–æ–º: O(n)  (filterIsInstance)
      ‚îú‚îÄ filter() –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º: O(n)
      ‚îî‚îÄ sortByDescending(): O(n log n)

        ‚îÇ
        ‚ñº
5. SearchActivity UI –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
   ‚îú‚îÄ LiveData.observe() —Å–ø—Ä–∞—Ü—å–æ–≤—É—î
   ‚îú‚îÄ RecyclerView.submitList(results)
   ‚îÇ  ‚îî‚îÄ DiffUtil –ø–æ—Ä—ñ–≤–Ω—é—î —Å—Ç–∞—Ä–∏–π —ñ –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫: O(n+m)
   ‚îî‚îÄ onBindViewHolder() –¥–ª—è –≤–∏–¥–∏–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
      ‚îú‚îÄ SearchAdapter.bind(item)
      ‚îú‚îÄ highlightText() - indexOf()  ‚óÑ‚îÄ‚îÄ O(m) –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ä—Ç–æ—á–∫–∏
      ‚îî‚îÄ Coil –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø–æ—Å—Ç–µ—Ä–∏ –∑ –∫–µ—à-–±—É—Ñ–µ—Ä–æ–º

        ‚îÇ
        ‚ñº
6. –†–ï–ó–£–õ–¨–¢–ê–¢ –ù–ê –ï–ö–†–ê–ù–Ü
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üé¨ –§–Ü–õ–¨–ú–ò (45 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üï∏Ô∏è Spider-Man (2002)      ‚≠ê 7.3  ‚îÇ ‚óÑ‚îÄ‚îÄ indexOf –∑–Ω–∞–π—à–æ–≤ "–ø–∞—É–∫"
‚îÇ üï∏Ô∏è Spider-Man 2 (2004)    ‚≠ê 7.3  ‚îÇ    —ñ –ø—ñ–¥—Å–≤—ñ—Ç–∏–≤ –π–æ–≥–æ
‚îÇ üï∏Ô∏è Spider-Man 3 (2007)    ‚≠ê 6.2  ‚îÇ
‚îÇ üï∏Ô∏è The Amazing Spider-Man ‚≠ê 6.9  ‚îÇ
‚îÇ ...                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

        ‚îÇ
        ‚ñº
7. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–Ω–æ–≤—É —à—É–∫–∞—î "–ø–∞—É–∫"
   ‚îú‚îÄ –ü–µ—Ä–µ–≤—ñ—Ä–∞ –∫–µ—à–∞: searchCache["–ø–∞—É–∫"]  ‚úì –ó–ù–ê–ô–®–õ–ò!
   ‚îú‚îÄ –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ –ø–∞–º'—è—Ç—ñ  ‚óÑ‚îÄ‚îÄ O(1), –ë–ï–ó API –∑–∞–ø–∏—Ç—É!
   ‚îî‚îÄ –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ –º–∏—Ç—Ç—î–≤–æ
```

### 7.2 –¢—Ä–∞–Ω—Å–ª—ñ–±–µ—Ä–∞—Ü—ñ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å: "–ø" ‚Üí "–∞" ‚Üí "—É" ‚Üí "–∫"

–ó–∞–ø–∏—Ç: "–ø–∞—É–∫"
Map transliterateCyrToLat:
  –ø ‚Üí p  (O(1))
  –∞ ‚Üí a  (O(1))
  —É ‚Üí u  (O(1))
  –∫ ‚Üí k  (O(1))

–†–µ–∑—É–ª—å—Ç–∞—Ç: "pauk"
```

### 7.3 –ö–µ—à–∏—Ä—É–≤–∞–Ω–Ω—è

```
–ó–∞–ø–∏—Ç 1: "Spider-Man"
  ‚îú‚îÄ –ö–µ—à –ø—É—Å—Ç–∏–π ‚ùå
  ‚îú‚îÄ API –∑–∞–ø–∏—Ç (–º–µ—Ä–µ–∂–∞)
  ‚îú‚îÄ 50 —Ñ—ñ–ª—å–º—ñ–≤ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ
  ‚îî‚îÄ searchCache["Spider-Man"] = [50 —Ñ—ñ–ª—å–º—ñ–≤] ‚úì

–ó–∞–ø–∏—Ç 2: "Spider-Man" (—á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥)
  ‚îú‚îÄ searchCache["Spider-Man"]  ‚úì –Ñ!
  ‚îî‚îÄ –ú–∏—Ç—Ç—î–≤–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ (–±–µ–∑ –º–µ—Ä–µ–∂–∏)
```

---

## 8. –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–ô–ù–Ü –ü–û–†–ê–î–ò

### 8.1 –©–æ –º–æ–∂–Ω–∞ –ø–æ–ª—ñ–ø—à–∏—Ç–∏

1. **–ó–∞–º—ñ–Ω–∏—Ç–∏ List –Ω–∞ HashSet –¥–ª—è `_favoriteSearches`**
   - –ü–æ—Ç–æ—á–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å: O(n)
   - –ù–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å: O(1)

2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Trie –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–Ω—è –ø–æ—à—É–∫—É**
   - –î–æ–ø–æ–º–æ–∂–µ –∑ –ø–æ—à—É–∫–æ–º –∑–∞ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º
   - –ß–∞—Å–æ–≤–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å: O(k), –¥–µ k - –¥–æ–≤–∂–∏–Ω–∞ –ø—Ä–µ—Ñ—ñ–∫—Å—É

3. **–ö–µ—à—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ Levenshtein**
   - HashMap<Pair<String, String>, Int> –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
   - –£–Ω–∏–∫–Ω–µ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å

4. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ BlooomFilter –¥–ª—è –¥–µ–¥—É–±–ª—ñ–∫–∞—Ü—ñ—ó**
   - –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö (10,000+ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)
   - –ó–º–µ–Ω—à–∏—Ç—å –ø–∞–º'—è—Ç—å –Ω–∞ 80%

### 8.2 –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü—ñ—è | –ß–∞—Å | –°—Ç–∞—Ç—É—Å |
|----------|------|--------|
| –ü–æ—à—É–∫ –≤ –∫–µ—à—ñ | 0.1 –º—Å | ‚úì –í—ñ–¥–º—ñ–Ω–Ω–æ |
| API –∑–∞–ø–∏—Ç | 100-500 –º—Å | ‚úì –ì–∞—Ä–Ω–æ |
| –õ—ñ–Ω—ñ–π–Ω–∏–π –ø–æ—à—É–∫ (500 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤) | 0.5 –º—Å | ‚úì –ì–∞—Ä–Ω–æ |
| DiffUtil (500 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤) | 5-10 –º—Å | ‚úì –ì–∞—Ä–Ω–æ |
| Levenshtein (10 —Å–ª—ñ–≤) | 0.2 –º—Å | ‚úì –í—ñ–¥–º—ñ–Ω–Ω–æ |

---

## –†–ï–ó–Æ–ú–ï

### –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç—ñ

| –ê–ª–≥–æ—Ä–∏—Ç–º | –°—Ç–∞—Ç—É—Å | –ú—ñ—Å—Ü–∞ | –°–ª–æ–∂–Ω—ñ—Å—Ç—å |
|----------|--------|-------|-----------|
| –í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É | ‚úÖ –¢–ê–ö | 5+ | O(n) memory |
| –õ—ñ–Ω—ñ–π–Ω–∏–π –ø–æ—à—É–∫ | ‚úÖ –¢–ê–ö | 6 | O(n) |
| –•–µ—à-—Ç–∞–±–ª–∏—Ü—ñ | ‚úÖ –¢–ê–ö | 4 | O(1) avg |
| Levenshtein | ‚úÖ –¢–ê–ö | 1 | O(m√ón) |
| DiffUtil | ‚úÖ –¢–ê–ö | 5+ | O(n+m) |

### –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏

- **Total:** 30+ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫
- **UI:** RecyclerView, Material Design 3, Lottie
- **Network:** Retrofit 2, OkHttp 3, Coil
- **Data:** Room, LiveData, ViewModel
- **DI:** Hilt/Dagger 2
- **Language:** Kotlin 2.0.21

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

- **Pattern:** MVVM
- **Database:** SQLite (—á–µ—Ä–µ–∑ Room)
- **API:** REST (TMDB)
- **Threading:** Coroutines
- **Build:** Gradle 8.9.2

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ:** 17 –≥—Ä—É–¥–Ω—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** MovieTimeTracker  
**–í–µ—Ä—Å—ñ—è:** 1.0

